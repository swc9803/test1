<template>
  <svg class="snow" width="1920" height="1080" viewBox="0 0 1920 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g class="snow1">
      <circle id="Ellipse 27" cx="101.5" cy="77.5" r="13.5" fill="white"/>
      <circle id="Ellipse 31" cx="1411.05" cy="124.099" r="13.5" fill="white"/>
      <circle id="Ellipse 39" cx="1185.5" cy="73.5" r="13.5" fill="white"/>
      <circle id="Ellipse 44" cx="1005.5" cy="229.5" r="13.5" fill="white"/>
      <circle id="Ellipse 53" cx="1848.5" cy="569.5" r="13.5" fill="white"/>
      <circle id="Ellipse 72" cx="131.563" cy="882.256" r="13.5" fill="white"/>
      <circle id="Ellipse 29" cx="205.5" cy="188.5" r="13.5" fill="white"/>
      <circle id="Ellipse 54" cx="74.8982" cy="490.735" r="13.5" fill="white"/>
      <circle id="Ellipse 73" cx="191.5" cy="1030.5" r="13.5" fill="white"/>
      <circle id="Ellipse 74" cx="946.5" cy="783.5" r="13.5" fill="white"/>
      <circle id="Ellipse 56" cx="1296.5" cy="811.5" r="13.5" fill="white"/>
      <circle id="Ellipse 87" cx="476.084" cy="976.818" r="13.5" fill="white"/>
      <circle id="Ellipse 57" cx="1074.46" cy="504.007" r="13.5" fill="white"/>
      <circle id="Ellipse 75" cx="1171.5" cy="936.5" r="13.5" fill="white"/>
      <circle id="Ellipse 46" cx="389.5" cy="333.5" r="13.5" fill="white"/>
      <circle id="Ellipse 58" cx="1397.5" cy="582.5" r="13.5" fill="white"/>
      <circle id="Ellipse 76" cx="660.811" cy="555.989" r="13.5" fill="white"/>
      <circle id="Ellipse 59" cx="296.5" cy="685.5" r="13.5" fill="white"/>
      <circle id="Ellipse 28" cx="674.41" cy="77.0947" r="13.5" fill="white"/>
      <circle id="Ellipse 77" cx="633.612" cy="810.919" r="13.5" fill="white"/>
      <circle id="Ellipse 62" cx="1640.5" cy="712.5" r="13.5" fill="white"/>
      <circle id="Ellipse 30" cx="1479.05" cy="333.131" r="13.5" fill="white"/>
      <circle id="Ellipse 65" cx="787.74" cy="365.205" r="13.5" fill="white"/>
      <circle id="Ellipse 34" cx="1805.44" cy="306.035" r="13.5" fill="white"/>
      <circle id="Ellipse 82" cx="1746.5" cy="909.5" r="13.5" fill="white"/>
      <circle id="Ellipse 83" cx="1345.5" cy="1030.5" r="13.5" fill="white"/>
      <circle id="Ellipse 42" cx="1791.84" cy="46.127" r="13.5" fill="white"/>
      <circle id="Ellipse 85" cx="1862.5" cy="1003.5" r="13.5" fill="white"/>
      <circle id="Ellipse 86" cx="843.5" cy="1030.5" r="13.5" fill="white"/>
    </g>
    <g class="snow2">
      <circle id="Ellipse 71" cx="322.507" cy="98.981" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 85_2" cx="49.6416" cy="155.218" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 113" cx="289.5" cy="643.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 155" cx="82.5" cy="952.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 100" cx="191.5" cy="391.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 142" cx="471.644" cy="1034.12" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 73_2" cx="709.158" cy="40.6016" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 129" cx="788.698" cy="668.313" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 159" cx="788.698" cy="1010.02" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 104" cx="959.5" cy="306.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 91" cx="1232.79" cy="203.421" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 92" cx="1559.79" cy="227.522" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 106" cx="1685.73" cy="431.582" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 135" cx="1460.5" cy="668.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 163" cx="1669.5" cy="1041.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 77_2" cx="1378.62" cy="16.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 137" cx="1124.5" cy="610.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 151" cx="1299.08" cy="935.572" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 96" cx="1886.79" cy="179.319" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 139" cx="1886.79" cy="742.76" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 167" cx="1853.5" cy="1010.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 83_2" cx="1669.16" cy="82.9136" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 154" cx="1611.5" cy="556.5" r="16.5" fill="white" fill-opacity="0.9"/>
    </g>
    <g class="snow3">
      <ellipse id="Ellipse 169" cx="315.955" cy="104.324" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 180" cx="52.5475" cy="237.685" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 191" cx="544.243" cy="409.833" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 213" cx="29.4994" cy="874.74" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 170" cx="1176.5" cy="364.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 203" cx="1064.5" cy="919.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 214" cx="314.858" cy="1032.01" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 193" cx="1518.5" cy="562.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 217" cx="764.847" cy="778.571" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 174" cx="1331.17" cy="146.298" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 175" cx="1688.5" cy="191.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <path id="Ellipse 220" d="M292.999 540.5C292.999 552.926 282.926 563 270.499 563C258.073 563 248 552.926 248 540.5C248 528.074 258.073 518 270.499 518C282.926 518 292.999 528.074 292.999 540.5Z" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 176" cx="854.499" cy="104.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 189" cx="1199.5" cy="675.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 211" cx="899.499" cy="495.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 212" cx="1826.16" cy="652.116" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 223" cx="1418.5" cy="954.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
    </g>
  </svg>
  <svg class="snow" width="1920" height="1080" viewBox="0 0 1920 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g class="snow12">
      <circle id="Ellipse 27" cx="101.5" cy="77.5" r="13.5" fill="white"/>
      <circle id="Ellipse 31" cx="1411.05" cy="124.099" r="13.5" fill="white"/>
      <circle id="Ellipse 39" cx="1185.5" cy="73.5" r="13.5" fill="white"/>
      <circle id="Ellipse 44" cx="1005.5" cy="229.5" r="13.5" fill="white"/>
      <circle id="Ellipse 53" cx="1848.5" cy="569.5" r="13.5" fill="white"/>
      <circle id="Ellipse 72" cx="131.563" cy="882.256" r="13.5" fill="white"/>
      <circle id="Ellipse 29" cx="205.5" cy="188.5" r="13.5" fill="white"/>
      <circle id="Ellipse 54" cx="74.8982" cy="490.735" r="13.5" fill="white"/>
      <circle id="Ellipse 73" cx="191.5" cy="1030.5" r="13.5" fill="white"/>
      <circle id="Ellipse 74" cx="946.5" cy="783.5" r="13.5" fill="white"/>
      <circle id="Ellipse 56" cx="1296.5" cy="811.5" r="13.5" fill="white"/>
      <circle id="Ellipse 87" cx="476.084" cy="976.818" r="13.5" fill="white"/>
      <circle id="Ellipse 57" cx="1074.46" cy="504.007" r="13.5" fill="white"/>
      <circle id="Ellipse 75" cx="1171.5" cy="936.5" r="13.5" fill="white"/>
      <circle id="Ellipse 46" cx="389.5" cy="333.5" r="13.5" fill="white"/>
      <circle id="Ellipse 58" cx="1397.5" cy="582.5" r="13.5" fill="white"/>
      <circle id="Ellipse 76" cx="660.811" cy="555.989" r="13.5" fill="white"/>
      <circle id="Ellipse 59" cx="296.5" cy="685.5" r="13.5" fill="white"/>
      <circle id="Ellipse 28" cx="674.41" cy="77.0947" r="13.5" fill="white"/>
      <circle id="Ellipse 77" cx="633.612" cy="810.919" r="13.5" fill="white"/>
      <circle id="Ellipse 62" cx="1640.5" cy="712.5" r="13.5" fill="white"/>
      <circle id="Ellipse 30" cx="1479.05" cy="333.131" r="13.5" fill="white"/>
      <circle id="Ellipse 65" cx="787.74" cy="365.205" r="13.5" fill="white"/>
      <circle id="Ellipse 34" cx="1805.44" cy="306.035" r="13.5" fill="white"/>
      <circle id="Ellipse 82" cx="1746.5" cy="909.5" r="13.5" fill="white"/>
      <circle id="Ellipse 83" cx="1345.5" cy="1030.5" r="13.5" fill="white"/>
      <circle id="Ellipse 42" cx="1791.84" cy="46.127" r="13.5" fill="white"/>
      <circle id="Ellipse 85" cx="1862.5" cy="1003.5" r="13.5" fill="white"/>
      <circle id="Ellipse 86" cx="843.5" cy="1030.5" r="13.5" fill="white"/>
    </g>
    <g class="snow22">
      <circle id="Ellipse 71" cx="322.507" cy="98.981" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 85_2" cx="49.6416" cy="155.218" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 113" cx="289.5" cy="643.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 155" cx="82.5" cy="952.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 100" cx="191.5" cy="391.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 142" cx="471.644" cy="1034.12" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 73_2" cx="709.158" cy="40.6016" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 129" cx="788.698" cy="668.313" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 159" cx="788.698" cy="1010.02" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 104" cx="959.5" cy="306.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 91" cx="1232.79" cy="203.421" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 92" cx="1559.79" cy="227.522" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 106" cx="1685.73" cy="431.582" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 135" cx="1460.5" cy="668.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 163" cx="1669.5" cy="1041.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 77_2" cx="1378.62" cy="16.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 137" cx="1124.5" cy="610.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 151" cx="1299.08" cy="935.572" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 96" cx="1886.79" cy="179.319" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 139" cx="1886.79" cy="742.76" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 167" cx="1853.5" cy="1010.5" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 83_2" cx="1669.16" cy="82.9136" r="16.5" fill="white" fill-opacity="0.9"/>
      <circle id="Ellipse 154" cx="1611.5" cy="556.5" r="16.5" fill="white" fill-opacity="0.9"/>
    </g>
    <g class="snow32">
      <ellipse id="Ellipse 169" cx="315.955" cy="104.324" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 180" cx="52.5475" cy="237.685" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 191" cx="544.243" cy="409.833" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 213" cx="29.4994" cy="874.74" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 170" cx="1176.5" cy="364.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 203" cx="1064.5" cy="919.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 214" cx="314.858" cy="1032.01" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 193" cx="1518.5" cy="562.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 217" cx="764.847" cy="778.571" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 174" cx="1331.17" cy="146.298" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 175" cx="1688.5" cy="191.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <path id="Ellipse 220" d="M292.999 540.5C292.999 552.926 282.926 563 270.499 563C258.073 563 248 552.926 248 540.5C248 528.074 258.073 518 270.499 518C282.926 518 292.999 528.074 292.999 540.5Z" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 176" cx="854.499" cy="104.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 189" cx="1199.5" cy="675.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 211" cx="899.499" cy="495.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 212" cx="1826.16" cy="652.116" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
      <ellipse id="Ellipse 223" cx="1418.5" cy="954.5" rx="22.4994" ry="22.5" fill="white" fill-opacity="0.8"/>
    </g>
  </svg>
</template>

<script>
import { onMounted } from 'vue'
import { gsap } from 'gsap'
import { ScrollTrigger } from 'gsap/ScrollTrigger'

gsap.registerPlugin(ScrollTrigger)
export default {
  setup () {
    onMounted(() => {
      const Snow = gsap.timeline()
      ScrollTrigger.create({
        animation: Snow,
        trigger: '.scrollElement',
        start: '24% top',
        end: '124% 100%',
        scrub: 2,
        onEnter: () => {
          gsap.to('.snow', { visibility: 'visible' })
          gsap.fromTo('.snow1', { y: '-100%', opacity: 0, ease: 'none', duration: 14, delay: 1.5 }, { y: '200%', opacity: 1, ease: 'none', duration: 14, delay: 1.5 })
          gsap.fromTo('.snow1', { y: '-150%', repeat: -1, ease: 'none', duration: 14 }, { y: '100%', repeat: -1, ease: 'none', duration: 14 })
          gsap.fromTo('.snow12', { y: '-150%', repeat: -1, ease: 'none', duration: 14, delay: 7 }, { y: '100%', repeat: -1, ease: 'none', duration: 14, delay: 7 })
          gsap.fromTo('.snow2', { y: '-100%', opacity: 0, ease: 'none', duration: 12, delay: 1.5 }, { y: '200%', opacity: 1, ease: 'none', duration: 12, delay: 1.5 })
          gsap.fromTo('.snow2', { y: '-150%', repeat: -1, ease: 'none', duration: 12 }, { y: '100%', repeat: -1, ease: 'none', duration: 12 })
          gsap.fromTo('.snow22', { y: '-150%', repeat: -1, ease: 'none', duration: 12, delay: 6 }, { y: '100%', repeat: -1, ease: 'none', duration: 12, delay: 6 })
          gsap.fromTo('.snow3', { y: '-100%', opacity: 0, ease: 'none', duration: 10, delay: 1.5 }, { y: '200%', opacity: 1, ease: 'none', duration: 10, delay: 1.5 })
          gsap.fromTo('.snow3', { y: '-150%', repeat: -1, ease: 'none', duration: 10 }, { y: '100%', repeat: -1, ease: 'none', duration: 10 })
          gsap.fromTo('.snow32', { y: '-150%', repeat: -1, ease: 'none', duration: 10, delay: 5 }, { y: '100%', repeat: -1, ease: 'none', duration: 10, delay: 5 })
          // const url = '#winter'
          // history.pushState('', '', url)
        },
        onLeave: () => {
          gsap.to('.snow', { visibility: 'hidden' })
          // const url = '#winter'
          // history.pushState('', '', url)
        }
      })

      const Snowstop = gsap.timeline()
      ScrollTrigger.create({
        animation: Snowstop,
        trigger: '.scrollElement',
        start: 'top top',
        end: '36.5% 100%',
        scrub: 0
      })
      Snowstop.to('.snow', { visibility: 'hidden' }, 0)
      Snowstop.to('.snow', { repeat: 0 }, 0)

      ScrollTrigger.create({
        trigger: '.scrollElement',
        start: '24% top',
        end: '100% 100%',
        scrub: 2,
        onEnter: () => {
          const url = '#winter'
          history.pushState('', '', url)
        },
        onLeave: () => {
          const url = '#winter'
          history.pushState('', '', url)
        }
      })
    })
  }
}
</script>

<style scoped>
.snow {
  position: fixed;
  display: block;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  visibility: hidden;
}
</style>
